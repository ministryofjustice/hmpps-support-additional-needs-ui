{% extends "../../layout.njk" %}

{% set pageId = 'education-support-plan-other-people-consulted-list' %}
{% set pageTitle = "Create an education support plan" %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <form class="form" method="post" novalidate="">
        <div class="govuk-form-group">
          <input type="hidden" name="_csrf" value="{{ csrfToken }}" />

          <table class="govuk-table" data-qa="people-consulted-table">
            <caption class="govuk-table__caption govuk-table__caption--l">Details of people consulted or involved</caption>

            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header">Name</th>
                <th scope="col" class="govuk-table__header govuk-!-width-one-quarter"><span class="govuk-visually-hidden">Actions</span></th>
              </tr>
            </thead>
            <tbody class="govuk-table__body">
            {% for person in dto.otherPeopleConsulted %}
              <tr class="govuk-table__row">
                <td class="govuk-table__cell" data-qa="person-consulted-name">{{ person.name }}</td>
                <td class="govuk-table__cell">
                  <button type="submit"
                          class="app-u-button-as-link"
                          value="{{ loop.index0 }}"
                          name="removePerson"
                          data-prevent-double-click="true"
                          data-module="govuk-button">
                    Remove <span class="govuk-visually-hidden"> {{ person.name }}</span>
                  </button>
                </td>
              </tr>
            {% endfor %}
            </tbody>
          </table>

          <div class="govuk-form-group">
            {{ govukButton({
              text: "Add another person",
              name: "addPerson",
              classes: "govuk-button--secondary",
              id: "addPerson",
              preventDoubleClick: true
            }) }}
          </div>
        </div>

        {{ govukButton({
          id: "submit-button",
          text: "Continue",
          type: "submit",
          attributes: {"data-qa": "submit-button"},
          preventDoubleClick: true
        }) }}
      </form>
    </div>
  </div>
{% endblock %}

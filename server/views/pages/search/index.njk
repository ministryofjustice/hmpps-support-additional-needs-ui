{% extends "../../partials/layout.njk" %}

{% set pageId = 'search-page' %}
{% set pageTitle = "Support for additional needs - Prisoner List" %}

{% block beforeContent %}
  <nav class="govuk-breadcrumbs govuk-!-display-none-print" aria-label="Breadcrumb">
    <ol class="govuk-breadcrumbs__list">
      <li class="govuk-breadcrumbs__list-item">
        <a class="govuk-breadcrumbs__link" href="{{ dpsUrl }}">Digital Prison Services</a>
      </li>
    </ol>
  </nav>
{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <div class="search-header-container">
        <h1 class="govuk-heading-l">Manage support for additional needs</h1>

        {% if featureToggles.dprReportEnabled %}
          {% if userHasPermissionTo('USE_DPR_REPORTING_SERVICE') and userHasPermissionTo('VIEW_SAN_DPR_REPORT') %}
            <a href="{{ dprReportUrl }}" target="_blank" class="govuk-link govuk-body" data-qa="dpr-report-link">
              <span>
                <img src="/assets/images/icon-document-magnifying-glass.svg" role="presentation" alt="" class="action-icon" />
                View additional needs reporting
              </span>
            </a>
          {% endif %}
        {% endif %}
      </div>


      {% include './_searchBox.njk' %}

      {% if searchResults.isFulfilled() %}
        {% include './_searchResults.njk' %}
      {% else %}
        <h2 class="govuk-heading-m" data-qa="search-unavailable-message">We cannot show these details right now</h2>
        <p class="govuk-body">Reload the page or try again later. Other parts of this service may still be available.</p>
      {% endif %}
    </div>
  </div>

{% endblock %}
